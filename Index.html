<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Mirror Art | Prompt Architect</title>

<link rel="manifest" href="manifest.json">
<meta name="theme-color" content="#8b5cf6">
<link rel="icon" href="icon-192.png">

<style>
:root {
    --bg-dark: #0f172a;
    --bg-card: rgba(30,41,59,0.7);
    --accent: #8b5cf6;
    --accent-glow: #8b5cf688;
    --text-main: #f8fafc;
    --text-muted: #94a3b8;
    --border: rgba(148,163,184,0.1);
    --font-main: 'Inter', system-ui, sans-serif;
    --brand-banana: #facc15;
}

/* Base & Background */
body {margin:0; background:var(--bg-dark); color:var(--text-main); font-family:var(--font-main); min-height:100vh; display:flex; flex-direction:column;}
body::before{content:""; position:fixed; inset:-50%; background:radial-gradient(circle,#1e1b4b,#0f172a 60%); animation:pulseBg 10s ease-in-out infinite alternate; z-index:-1;}
@keyframes pulseBg { to{transform:scale(1.1);} }

.container{max-width:1200px; margin:auto; padding:40px 20px; flex:1;}
header{text-align:center; margin-bottom:40px;}
h1{font-size:3rem;font-weight:800; background:linear-gradient(135deg,#fff,#94a3b8); -webkit-background-clip:text; -webkit-text-fill-color:transparent;}
.subtitle{color:var(--text-muted); font-size:1rem;}
#searchBar{display:block; margin:0 auto 25px auto; width:90%; max-width:400px; padding:8px 15px; border-radius:25px; border:none; font-size:.95rem;}

/* Filters */
.filter-bar{display:flex; gap:10px; justify-content:center; margin-bottom:35px; overflow-x:auto; padding-bottom:5px;}
.filter-btn{background:rgba(255,255,255,.05); border:1px solid var(--border); color:var(--text-muted); padding:8px 18px; border-radius:999px; cursor:pointer; white-space:nowrap; display:flex; align-items:center;}
.filter-btn.active{background:var(--accent); color:#fff; box-shadow:0 0 15px var(--accent-glow);}
.filter-btn span{margin-left:5px; background:#8b5cf6; color:#fff; padding:2px 6px; border-radius:12px; font-size:0.8rem;}
@keyframes pulseBadge {0%{transform:scale(1);}50%{transform:scale(1.4);}100%{transform:scale(1);}}
.fav-pulse {animation:pulseBadge 0.5s ease-in-out;}

/* Grid & Card */
.grid{display:grid; grid-template-columns:repeat(auto-fill,minmax(340px,1fr)); gap:25px;}
.card{background:var(--bg-card); border:1px solid var(--border); border-radius:20px; padding:25px; backdrop-filter:blur(20px); display:flex; flex-direction:column;}
.tag{color:var(--accent); font-size:.7rem; font-weight:700; letter-spacing:1.2px; text-transform:uppercase; margin-bottom:10px;}
.card h3{margin:0 0 15px;}
.prompt-box{background:rgba(0,0,0,.35); padding:15px; border-radius:10px; font-family:Consolas,monospace; font-size:.9rem; line-height:1.6; color:#cbd5e1; white-space:pre-wrap; flex-grow:1; margin-bottom:20px;}

/* Action buttons */
.action-bar{display:flex; gap:10px; flex-wrap:wrap; align-items:center;}
.btn-copy{flex:2; border:none; background:var(--text-main); color:var(--bg-dark); border-radius:10px; font-weight:700; cursor:pointer; padding:12px; transition:transform .2s;}
.btn-copy:hover{background:var(--accent); color:#fff;}
.btn-copy:active{transform:scale(0.95);}
.link-group{display:flex; gap:8px;}
.btn-link{width:44px; height:44px; display:grid; place-items:center; border-radius:10px; background:rgba(255,255,255,.1); color:#fff; text-decoration:none; font-weight:700;}
.btn-link.banana:hover{background:var(--brand-banana); color:#000;}
.btn-link.sora:hover{background:#fff; color:#000;}
.favorite-btn{font-size:1.2rem; transition:transform .3s;}
.favorite-btn.clicked{transform:scale(1.3);}

/* Footer */
footer{text-align:center; padding:35px 0; color:var(--text-muted); border-top:1px solid rgba(255,255,255,.05);}

/* Toast */
#toast{position:fixed; bottom:25px; left:50%; transform:translateX(-50%) translateY(20px); background:#10b981; padding:10px 25px; border-radius:30px; opacity:0; transition:.3s;}
#toast.show{opacity:1; transform:translateX(-50%) translateY(0);}

/* Install Prompt */
.install-prompt{position:fixed; bottom:20px; left:50%; transform:translateX(-50%) translateY(100px); background:var(--accent); color:#fff; padding:15px 20px; border-radius:12px; display:flex; gap:15px; align-items:center; font-weight:600; opacity:0; pointer-events:none; transition:all .5s ease; box-shadow:0 10px 25px rgba(0,0,0,.4);}
.install-prompt.show{opacity:1; transform:translateX(-50%) translateY(0);}
.install-prompt button{background:#fff; color:var(--accent); border:none; border-radius:8px; padding:8px 15px; cursor:pointer; font-weight:bold;}

/* Mobile */
@media(max-width:768px){
h1{font-size:2.2rem;}
.container{padding:30px 16px;}
.grid{grid-template-columns:1fr;}
.card{padding:20px;}
.prompt-box{font-size:.95rem;}
.action-bar{flex-direction:column; align-items:stretch;}
.btn-copy{width:100%;}
.link-group{justify-content:space-between;}
}
</style>
</head>
<body>

<div class="container">
<header>
<h1>Mirror Art</h1>
<p class="subtitle">The Ultimate Prompt Library</p>
</header>

<input type="text" id="searchBar" placeholder="Search prompts...">

<div class="filter-bar">
    <button class="filter-btn active" data-filter="all">All</button>
    <button class="filter-btn" data-filter="Sora">Sora</button>
    <button class="filter-btn" data-filter="Banana">Banana</button>
    <button class="filter-btn" data-filter="favorites">
      Favorites <span id="favCount">0</span>
    </button>
</div>

<div class="grid" id="grid"></div>
</div>

<footer>
Developed by <a href="https://github.com/pro-haitham" target="_blank">@pro-haitham</a>
</footer>

<div id="toast">Prompt Copied!</div>

<div id="installPrompt" class="install-prompt">
<span>Install Mirror Art App for quick access!</span>
<button id="btnInstall">Install</button>
</div>

<script>
// ---------------- PROMPTS ----------------
const prompts=[
{type:"Sora",title:"Cinematic Reflection",content:`A cinematic transformation of a mirror reflection photo.
Preserve identity and facial features.
Soft cinematic lighting, shallow depth of field.
Emotional, poetic, artistic realism.`},
{type:"Banana",title:"Artistic Portrait (Best)",content:`Mirror reflection portrait, artistic realism,
cinematic lighting, soft oil painting texture.
NEGATIVE PROMPT:
distorted face, extra eyes, blur, low quality.`}
];

const links={ sora:"https://sora.chatgpt.com/", banana:"https://gemini.google.com/" };
const grid=document.getElementById("grid");
const toast=document.getElementById("toast");
const searchBar=document.getElementById("searchBar");
const favCountSpan=document.getElementById("favCount");
let currentFilter="all";

// ---------------- FAVORITES ----------------
function getFavorites(){return JSON.parse(localStorage.getItem("mirrorArtFavorites")||"[]");}
function toggleFavorite(title){
    const fav = getFavorites();
    if(fav.includes(title)){ fav.splice(fav.indexOf(title),1); } 
    else { fav.push(title); }
    localStorage.setItem("mirrorArtFavorites",JSON.stringify(fav));
    updateFavCount();
}
function updateFavCount(){
    const count=getFavorites().length;
    favCountSpan.textContent=count;
    favCountSpan.classList.add("fav-pulse");
    setTimeout(()=>favCountSpan.classList.remove("fav-pulse"),500);
}

// ---------------- RENDER ----------------
function render(){
    const searchValue=searchBar.value.toLowerCase();
    const favorites=getFavorites();
    grid.innerHTML="";
    prompts
    .filter(p=>{
        let passesFilter=(currentFilter==="all"||p.type===currentFilter||(currentFilter==="favorites"&&favorites.includes(p.title)));
        let passesSearch=p.title.toLowerCase().includes(searchValue)||p.content.toLowerCase().includes(searchValue);
        return passesFilter&&passesSearch;
    })
    .forEach(p=>{
        const card=document.createElement("div");
        card.className="card";
        card.innerHTML=`<div class="tag">${p.type}</div><h3>${p.title}</h3><div class="prompt-box">${p.content}</div>`;
        
        const actionBar=document.createElement("div"); actionBar.className="action-bar";

        // COPY BUTTON
        const copyBtn=document.createElement("button");
        copyBtn.className="btn-copy"; copyBtn.textContent="Copy";
        copyBtn.addEventListener("click",()=>copyPrompt(p.content));

        // FAVORITE BUTTON
        const favBtn=document.createElement("button");
        favBtn.className="btn-copy favorite-btn";
        favBtn.textContent=favorites.includes(p.title)?"★":"☆";
        favBtn.title="Toggle Favorite";
        favBtn.addEventListener("click",()=>{
            favBtn.classList.add("clicked");
            setTimeout(()=>favBtn.classList.remove("clicked"),300);
            toggleFavorite(p.title);
            render();
        });

        // LINK BUTTONS
        const linkGroup=document.createElement("div"); linkGroup.className="link-group";
        linkGroup.innerHTML=`<a class="btn-link sora" href="${links.sora}" target="_blank">S</a>
        <a class="btn-link banana" href="${links.banana}" target="_blank">B</a>`;

        actionBar.append(copyBtn,favBtn,linkGroup);
        card.append(actionBar);
        grid.append(card);
    });
    updateFavCount();
}

// ---------------- COPY ----------------
function copyPrompt(text){
    navigator.clipboard.writeText(text);
    toast.classList.add("show");
    setTimeout(()=>toast.classList.remove("show"),2000);
}

// ---------------- FILTER ----------------
document.querySelectorAll(".filter-btn").forEach(btn=>{
    btn.addEventListener("click",()=>{
        document.querySelector(".filter-btn.active").classList.remove("active");
        btn.classList.add("active");
        currentFilter=btn.dataset.filter;
        render();
    });
});

// ---------------- SEARCH ----------------
searchBar.addEventListener("input",()=>render());

// ---------------- INSTALL PROMPT ----------------
let deferredPrompt;
const installPromptDiv=document.getElementById("installPrompt");
const btnInstall=document.getElementById("btnInstall");
window.addEventListener('beforeinstallprompt',(e)=>{
    e.preventDefault();
    deferredPrompt=e;
    installPromptDiv.classList.add("show");
});
btnInstall.addEventListener("click",async()=>{
    installPromptDiv.classList.remove("show");
    if(deferredPrompt){
        deferredPrompt.prompt();
        deferredPrompt=null;
    }
});

// ---------------- SERVICE WORKER ----------------
if("serviceWorker" in navigator){
    window.addEventListener("load",()=>{
        navigator.serviceWorker.register("./sw.js")
        .then(reg=>console.log("SW Registered:",reg.scope))
        .catch(err=>console.log("SW Registration Failed:",err));
    });
}

// ---------------- INITIAL RENDER ----------------
render();
</script>
</body>
</html>
